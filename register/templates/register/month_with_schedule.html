{% extends 'register/base_calendar.html' %}
{% block content %}
<style>
    table {
        table-layout: fixed;
    }

    td > div {
      height: 100px;
      overflow: auto;
      white-space: nowrap;
    }

    .btn_noon{
      background-color: darkorange;
    }

    .btn_night{
      background-color: darkblue;
    }

</style>

<a href="{% url 'register:month_with_schedule' month.previous.year month.previous.month %}">前月</a>
{{ month.current | date:"Y年m月" }}
<a href="{% url 'register:month_with_schedule' month.next.year month.next.month %}">次月</a>
<table class="table">
  <thead>
    <tr>
      {% for w in month.week_names %}
        <th>{{ w }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for week in month.days %}
      <tr>

        {% for day, schedules in week %}

          {% if month.now == day %}
            <td class="table-success">
          {% else %}
            <td>
          {% endif %}

          <div>
            {% if month.current.month != day.month %}
              {{ day | date:"m/d" }}
            {% else %}
              {{ day.day }}

            {% endif %}
 {% for s in schedules %}
 <br>
                           <!-- 1.モーダル表示のためのボタン -->
{% if s.start_time >= s.night_start_time%}
<button class="btn_night" data-toggle="modal" data-target="#{{s.id}}">
   {{ s.user_name }}
</button>
{% else %}
<button class="btn_noon"  data-toggle="modal" data-target="#{{s.id}}">
   {{ s.user_name }}
</button>
{% endif %}
<!-- 2.モーダルの配置 -->
<div class="modal" id="{{s.id}}" tabindex="-1">
    <div class="modal-dialog">

        <!-- 3.モーダルのコンテンツ -->
        <div class="modal-content">
            <!-- 4.モーダルのヘッダ -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="modal-label">
                  <!--各スケジュール記入者に後で変更-->
                  {{s.user_name}}の詳細
         {{ day | date:"m/d" }}
                  </h4>
            </div>
            <!-- 5.モーダルのボディ -->
            <div class="modal-body">
               <p> {{ s.user_name }}</p>
               <p>{{ s.summary }}</p>
               <p> {{ s.start_time }} - {{ s.end_time }}</p>
            </div>
            <!-- 6.モーダルのフッタ -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
            </div>
          </div>
        </div>
    </div>
    </br>
     {% endfor %}
            {% for schedule in schedules %}

                <p>{{ s.user_name }}</p>
     {% endfor %}

</div>
          </td>

        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}